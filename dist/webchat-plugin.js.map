{"version":3,"sources":["../alias/react.js","index.jsx"],"names":["window","__COGNIGY_WEBCHAT","Error","module","exports","React","popupwindow","url","title","w","h","left","screen","width","top","height","open","qrTemplateHeaderMessageCSS","padding","background","color","border","qrTemplateRepliesContainerCSS","margin","qrTemplateButtonsCSS","Button","props","message","onSendMessage","data","_plugin","buttonsHTML","quickReplies","map","button","payload","contentType","URLConfigs","URL","popupWindowTitle","popupWidth","popupHeight","cursor","text","buttonPlugin","match","component","cognigyWebchatMessagePlugins","push"],"mappings":"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","file":"webchat-plugin.js","sourceRoot":"../src","sourcesContent":["if (!window.__COGNIGY_WEBCHAT)\n    throw new Error('Cognigy Webchat v2.7 or higher has to be loaded before this plugin');\n\nmodule.exports = window.__COGNIGY_WEBCHAT.React;","import * as React from \"react\";\n\n/*\n    This plugin is to create a custom quick replies in cognigy webchat\n    which allows 2 actions in one button postback & URL\n\n    by clicking on this qr button widget should give postback to bot as well as open a url too\n    for use-cases like sign in in the middle of flow\n\n    You can call the plugin from within Cognigy by sending a data message using a Say Node.\n    {\n      \"_plugin\": {\n        \"type\": \"button\",\n        \"text\": \"To help you with that, I need you to sign in first.\",\n        \"quickReplies\": [\n            {\n                \"title\": \"Sign in\",\n                \"imageAltText\": \"\",\n                \"imageUrl\": \"\",\n                \"contentType\": \"postbackAndURL\",\n                \"payload\": \"Sign in\",\n                \"URLConfig\": {\n                    \"URL\": \"https://example.com\",\n                    \"popupWindowTitle\": \"Sign in\",\n                    \"popupWidth\": 500,\n                    \"popupHeight\": 600\n                }\n            },\n            {\n                \"title\": \"I don't have a profile\",\n                \"imageAltText\": \"\",\n                \"imageUrl\": \"\",\n                \"contentType\": \"postback\",\n                \"payload\": \"I don't have a profile\"\n            }\n          ]\n      }\n  }\n*/\n\n/** open a popup in center of the screen */\nconst popupwindow = function (url, title, w, h) {\n  let left = (screen.width/2)-(w/2);\n  let top = (screen.height/2)-(h/2);\n  return window.open(url, title, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width='+w+', height='+h+', top='+top+', left='+left);\n};\n\nconst qrTemplateHeaderMessageCSS = {\n  padding: \"16px 24px\",\n  \"min-width\": \"0px\",\n  \"word-break\": \"break-word\",\n  \"white-space\": \"pre-wrap\",\n  \"border-radius\": \"16px 16px 16px 0px\",\n  \"box-shadow\":\n    \"rgba(151, 124, 156, 0.1) 0px 5px 9px 0px, rgba(203, 195, 212, 0.1) 0px 5px 16px 0px, rgba(216, 212, 221, 0.1) 0px 8px 20px 0px\",\n  background:\n    \"rgba(0, 0, 0, 0) linear-gradient(185deg, rgb(54, 118, 185), rgb(44, 108, 175)) repeat scroll 0% 0%\",\n  color: \"rgba(255, 255, 255, 0.95)\",\n  border: \"1px solid rgb(230, 230, 230)\",\n};\nconst qrTemplateRepliesContainerCSS = {\n  'text-align': 'center', margin: '3px -5px -5px', 'flex-wrap': 'wrap',\n}\nconst qrTemplateButtonsCSS = {\n  'background-color': 'transparent',\n  'border': '1px solid rgb(44, 108, 175)',\n  'border-radius': '40px',\n  'padding': '4px 16px',\n  'min-height': '40px',\n  'min-width': '40px',\n  'font-size': '15px',\n  'color': 'rgb(44, 108, 175)',\n  'cursor': 'pointer',\n  'outline': 'currentcolor none medium',\n  'transition': 'transform 0.1s ease-out 0s',\n  'margin': '3px'\n}\n\nconst Button = (props) => {\n  const { message, onSendMessage } = props;\n  const { data } = message;\n  const { _plugin } = data;\n  let buttonsHTML;\n  if (_plugin.quickReplies) {\n    buttonsHTML = _plugin.quickReplies.map(button => {\n      return (\n        <button\n            class=\"webchat-quick-reply-template-reply\"\n            type=\"button\"\n            // className=\"signinButton\"\n            onClick={() => {\n              onSendMessage(button.payload);\n              if (button.contentType === 'postbackAndURL') {\n                popupwindow(\n                  button.URLConfigs.URL,\n                  button.URLConfigs.popupWindowTitle,\n                  button.URLConfigs.popupWidth,\n                  button.URLConfigs.popupHeight\n                );\n              }\n            }}\n            style={qrTemplateButtonsCSS}\n          >\n            <span style={{'font-size': '15px', color: 'rgb(44, 108, 175)', cursor: 'pointer',}}>\n              {button.title}\n            </span>\n        </button>\n      )\n    });\n  }\n\n  return (\n    <div class=\"webchat-quick-reply-template-root\">\n      <div\n        class=\"webchat-quick-reply-template-header-message\"\n        style={qrTemplateHeaderMessageCSS}\n      >\n        {_plugin.text}\n      </div>\n      <div\n        class=\"webchat-quick-reply-template-replies-container\"\n        style={qrTemplateRepliesContainerCSS}\n      >\n        {buttonsHTML}\n      </div>\n    </div>\n  );\n};\n\nconst buttonPlugin = {\n  match: \"button\",\n  component: Button,\n};\n\nif (!window.cognigyWebchatMessagePlugins) {\n  window.cognigyWebchatMessagePlugins = [];\n}\n\nwindow.cognigyWebchatMessagePlugins.push(buttonPlugin);\n"]}